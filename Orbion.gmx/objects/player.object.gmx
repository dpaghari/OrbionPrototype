<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>player_spr</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.playerHealth = 100;
global.playerMaxHealth = 100;
global.playerShields = 0;
global.playerMaxShields = 50;
global.playerAmmo = 10;
global.isDead = false;
global.playerBulPerShot = 1;
playerMaxScatterAngle = 35;
global.cant_afford = false;
max_Ammo = 14;
global.build_mode = false;
global.reloading = false;
global.labUpgr_mode = false;
global.labUpgr_mode2 = false;
global.labUpgr_mode3 = false;

buildingGCost = 0;
buildingECost = 0;
global.orbShot = false;

global.orbRank = 1;
global.scatterRank = 0;
global.shieldRank = 0;
global.mvspdRank = 0;
global.maxHPRank = 0;

global.maxRank = false;



playerMvspd = 8;
global.turretMax = 0;
global.turretCount = 0;
reloadTimer = 0;
reloadTime = 60;
shieldTimer = 0;
global.shieldOn = false;
res = 0;
firingTimer = 0;
rate = 5;
resource_rate = 40;
resource_timer = 0;
facing = "down";

//none, building, upgrading
global.state = 'none';

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.maxRank = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.maxHPRank &lt; 3 ){
    global.playerMaxHealth += 100;  
    global.playerHealth += 100;
    global.maxHPRank++;
}
else{
    global.maxHPRank = 3;
}
    



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.mvspdRank &lt; 3 ){
    playerMvspd += 1.2;
    global.mvspdRank++;
}
else{
    global.mvspdRank = 3;
}
    



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.shieldRank &lt; 3 ){
    if(!instance_exists(obj_shield)){
    instance_create(x, y, obj_shield);
    }
    global.shieldOn = true;
    global.playerMaxShields += 50;
    global.playerShields += 50;
    global.shieldRank++;
}
else{
    global.shieldRank = 3;
}
    




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.turretOn = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if( !global.orbShot) global.orbShot = true;
    
if(global.orbRank &lt; 3 ){
    global.orbRank++;
}
else{
    global.orbRank = 3;
}
    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.scatterRank &lt; 3 ){
    global.playerBulPerShot++;
    global.scatterRank++;
}
else{
    global.scatterRank = 3;
}






</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>shootAngle = point_direction(player.x, player.y, mouse_x, mouse_y);                            // player rotation
firingTimer++;
resource_timer++;

if(global.playerAmmo == 0)
{
global.reloading = true;
}

if(global.reloading == true)
{
    reloadTimer++;
   
}
if(reloadTimer &gt; reloadTime)
{
    global.playerAmmo = max_Ammo;
    reloadTimer = 0;
    global.reloading = false;
}
//shield regen
if(global.shieldOn &amp;&amp; global.playerShields &lt; global.playerMaxShields){
    shieldTimer++;
    if(!instance_exists(obj_shield) &amp;&amp; global.playerShields &gt;= 20){
    instance_create(x, y, obj_shield);
    }
    if(shieldTimer &gt; 20){
        global.playerShields += 2;
        shieldTimer = 0;
    }
}
if(global.playerHealth &lt;= 0){
    //instance_destroy();
    global.playerHealth = 0;    
    global.isDead = true;
    sprite_index = spr_player_death;
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_enemy">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.playerHealth -= 1;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_enemy_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var damage = 10;

if(facing == "down")
player.sprite_index = player_hurt;

if(facing == "left")
player.sprite_index = player_hurt_side;

if(facing == "right")
player.sprite_index = player_hurt_side;

if(facing == "up")
player.sprite_index = player_shoot_back;


var hpdmg = 0;
//if your shields are less than damage you take
//reduce health by damage - shields and set shields to zero
if(global.playerShields &lt; damage){
    hpdmg = damage - global.playerShields;
    global.playerHealth -= hpdmg;
    global.playerShields = 0;
//otherwise just damage shields
} else {
    global.playerShields -= damage;
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="87">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.isDead)
{
    if(place_free(player.x, player.y - 10)){
    player.y -= playerMvspd;
    player.sprite_index = player_runu;
    facing = "up";
    image_speed = 0.3;
    view_yview -= playerMvspd;
    }
}






</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="83">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.isDead)
{
    if(place_free(player.x, player.y + 10)){
    player.y += playerMvspd;   
    player.sprite_index = player_rund;
    image_speed = 0.3;
    facing = "down";
    view_yview += playerMvspd;
    }
}






</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="68">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.isDead)
{
    if(place_free(player.x - 10, player.y)){
    player.x += playerMvspd;
    player.sprite_index = player_runs;
    image_speed = 0.3;
    facing = "right";
    image_xscale = -1; 
    view_xview += playerMvspd;
    }
}






</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="65">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.isDead)
{
    if(place_free(player.x - 10, player.y)){
        player.x -= playerMvspd;
        player.sprite_index = player_runs;
        image_speed = 0.3;
        facing = "left";  
        image_xscale = 1; 
        view_xview -= playerMvspd;
    }
    
}






</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.playerGold += 100;
global.playerEnergy += 100;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var bull;
if(!global.isDead){
if(!global.reloading){
if (firingTimer &gt; rate &amp;&amp; global.playerAmmo &gt; 0)                 // spaces out bullets so you don't spam
            {

               //shoots multiple bullets
               //angleOffset is calculated such that the spread of the bullets directions
               //never exceeds playerMaxScatterAngle
               //shootAngle + playerMaxScatterAngle/2 is the upper bound of the spread
               //
               //playerMaxScatterAngle/(global.playerBulPerShot + 1) is the spacing between bullets and the bounds
               //Example:
               //if we're shooting 1 bullet, it would have a spacing of MaxAngle/2 between the upper &amp; lower bounds
               //   resulting in the bullet being perfectly centered to our shootAngle
               //if we're shooting 2 bullets, there would be MaxAngle/3 spacing
               //   the first bullet would be directed MaxAngle/3 away from the top bound
               //   the second bullet would be directed MaxAngle/3 away from the first bullet
               //   the second bullet would also be MaxAngle/3 away from the lower bound
                global.playerAmmo -= 1;
                for(var currBul = 1; currBul &lt;=global.playerBulPerShot; currBul++)
                {
                    if(!global.orbShot){
                    bull = instance_create(player.x, player.y, obj_bullet);
                    bull.image_angle = shootAngle;
                    bull.speed = 20;
                    }
                    else{
                    bull = instance_create(player.x, player.y, obj_orbShot);
                    bull.image_angle = shootAngle;
                    bull.speed = 10;
                    }
                    var angleOffset = playerMaxScatterAngle/2 - playerMaxScatterAngle/(global.playerBulPerShot + 1)*currBul;
                    bull.direction = shootAngle + angleOffset;
                    
                }
                firingTimer = 0;
                
                //old code before scatter shot implementation
                /*     
                global.playerAmmo -= 1;
                bull = instance_create(player.x, player.y, obj_bullet);
                bull.speed = 20;
                bull.direction = shootAngle;
                firingTimer = 0;
                */
                if(facing == "down")
                player.sprite_index = player_shoot;
                
                if(facing == "left")
                player.sprite_index = player_shoot_side;
                
                if(facing == "right")
                player.sprite_index = player_shoot_side;
                
                if(facing == "up")
                player.sprite_index = player_shoot_back;
                
            }
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="84">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.turretCount &gt; 0 &amp;&amp; global.turretMax &lt; 3){
instance_create(player.x, player.y, obj_turret);
global.turretMax++;
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.playerAmmo != max_Ammo){
global.reloading = true;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="81">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>


if(instance_exists(obj_labUpgrCard)){
    if(global.scatterRank == 1){
    buildingGCost = 200;
    buildingECost = 125;
    }
    if(global.scatterRank == 2){
    buildingGCost = 250;
    buildingECost = 150;
    }
    if(global.scatterRank == 3){
    buildingGCost = 275;
    buildingECost = 175;
    }
}
if(instance_exists(obj_labUpgrCard3)){
    if(global.mvspdRank == 1){
    buildingGCost = 150;
    buildingECost = 100;
    }
    if(global.mvspdRank == 2){
    buildingGCost = 175;
    buildingECost = 125;
    }
    if(global.mvspdRank == 3){
    buildingGCost = 200;
    buildingECost = 150;
    }

}


if(global.playerGold &gt;= buildingGCost &amp;&amp; global.playerEnergy &gt;= buildingECost){
    
    if( instance_exists (obj_labUpgrCard)){
        if(global.scatterRank != 3){
        global.playerGold -= buildingGCost;
        //global.playerEnergy -= 100;
        alarm[0] = 5*30;
        }
        else{
        global.maxRank = true;
        alarm[9] = 1*30;
        }
        }
}
else{
global.cant_afford = true;
obj_HUDcontroller.alarm[0] = 40;
}
if(global.playerGold &gt;= 250 &amp;&amp; global.playerEnergy &gt;= 100){
    if( instance_exists (obj_labUpgrCard2)){
        
        if(global.turretCount &lt; 3){
        global.playerGold -= 250;
        //global.playerEnergy -= 100;
        alarm[2] = 5*30;
        global.turretCount += 1;
        }
        else{
        global.maxRank = true;
        alarm[9] = 1*30;
        }
    }
        
        
}
else{
global.cant_afford = true;   
obj_HUDcontroller.alarm[0] = 40;
}
if(global.playerGold &gt;= buildingGCost &amp;&amp; global.playerEnergy &gt;= buildingECost){
    if( instance_exists (obj_labUpgrCard3)){
        if(global.mvspdRank != 3){
        global.playerGold -= buildingGCost;
        //global.playerEnergy -= 100;
        alarm[4] = 5*30;
        }
        else
        {
        global.maxRank = true;
        alarm[9] = 1*30;
        }
    }
        
        
}
else{
global.cant_afford = true; 
obj_HUDcontroller.alarm[0] = 40;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="69">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>


if(instance_exists(obj_labUpgrCard)){
    if(global.orbRank == 1){
    buildingGCost = 200;
    buildingECost = 100;
    }
    if(global.orbRank == 2){
    buildingGCost = 250;
    buildingECost = 125;
    }
    if(global.orbRank == 3){
    buildingGCost = 275;
    buildingECost = 150;
    }
}
if(instance_exists(obj_labUpgrCard3)){
    if(global.maxHPRank == 1){
    buildingGCost = 150;
    buildingECost = 150;
    }
    if(global.maxHPRank == 2){
    buildingGCost = 175;
    buildingECost = 175;
    }
    if(global.maxHPRank == 3){
    buildingGCost = 200;
    buildingECost = 200;
    }
}
if(instance_exists(obj_labUpgrCard2)){    
    if(global.shieldRank == 1){
    buildingGCost = 250;
    buildingECost = 125;
    }
    if(global.shieldRank == 2){
    buildingGCost = 275;
    buildingECost = 150;
    }
    if(global.shieldRank == 3){
    buildingGCost = 300;
    buildingECost = 175;
    }

}


if(global.playerGold &gt;= buildingGCost &amp;&amp; global.playerEnergy &gt;= buildingECost){
    if( instance_exists (obj_labUpgrCard)){
        if(global.orbRank != 3){
        global.playerGold -= buildingGCost;
        //global.playerEnergy -= 100;
        alarm[1] = 30*5;
        }
        else{
        global.maxRank = true;
        alarm[9] = 1*30;
        }   
    }
        
}
else{
global.cant_afford = true;
obj_HUDcontroller.alarm[0] = 40;
}
if(global.playerGold &gt;= buildingGCost &amp;&amp; global.playerEnergy &gt;= buildingECost){
    if( instance_exists (obj_labUpgrCard2)){
        if(global.shieldRank != 3){
        global.playerGold -= buildingGCost;
        //global.playerEnergy -= 100;
        alarm[3] = 30*5;
        }
        else{
        global.maxRank = true;
        alarm[9] = 1*30;
        }
    }
        
}
else{
global.cant_afford = true;
obj_HUDcontroller.alarm[0] = 40;
}
if(global.playerGold &gt;= buildingGCost &amp;&amp; global.playerEnergy &gt;= buildingECost){
    if( instance_exists (obj_labUpgrCard3)){
        if(global.maxHPRank != 3){
        global.playerGold -= buildingGCost;
        //global.playerEnergy -= 150;
        alarm[5] = 30*5;
        }
        else{
        global.maxRank = true;
        alarm[9] = 1*30;
        }
    }
        
}
else{
global.cant_afford = true;
obj_HUDcontroller.alarm[0] = 40;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="66">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//global.state = none, building, upgrading

//If building or upgrading
if(global.state == 'building' || global.state == 'upgrading')
{
    //if building remove buildcard
    if(instance_exists(obj_buildcard))
    {
        with(obj_buildcard)
        {
        instance_destroy();
        }
        global.state = 'none';                                
    }
    //if upgrading remove upgradecard
    if(instance_exists(obj_parent_upgrade))
    {
        with(obj_parent_upgrade)
        {
        instance_destroy();
        }
        global.state = 'none';                        
    }
//if state = none
} else {
    //In range of building -&gt; open upgrade
    if (instance_exists (obj_lab)){
        if (obj_lab.inProximity){
            instance_create(view_xview - 200, view_yview + 250, obj_labUpgrCard);
            global.state = 'upgrading';
        }
    }
    if (instance_exists (obj_deflab)){
        if (obj_deflab.inProximity){
            instance_create(view_xview - 200, view_yview + 250, obj_labUpgrCard2);
            global.state = 'upgrading'; 
        }
    }
    if (instance_exists (obj_dnalab)){
        if (obj_dnalab.inProximity){
            instance_create(view_xview - 200, view_yview + 250, obj_labUpgrCard3);
            global.state = 'upgrading'; 
        }
    }
    //else open buildcard
    if (global.state != 'upgrading')
    {
        instance_create(view_xview, view_yview, obj_buildcard);
        global.state = 'building'; 
    }
}//end of else



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.state == 'building') 
{
    if(global.playerGold &gt;= 100 &amp;&amp; global.playerEnergy &gt;= 30 &amp;&amp; !instance_exists(obj_medbay))
    {
        global.playerGold -= 100;
        //global.playerEnergy -= 30;
        instance_create(player.x, player.y, obj_medbay);
        global.cant_afford = false;
        global.state = 'none';
    }
    else
    {
        global.cant_afford = true;
        obj_HUDcontroller.alarm[0] = 40;
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.state == 'building') 
{
    if(global.playerGold &gt;= 50)
    {
        global.playerGold -= 50;
        instance_create(player.x, player.y, obj_generator);
        global.cant_afford = false;
        global.state = 'none';
    }
    else
    {
        global.cant_afford = true;
        obj_HUDcontroller.alarm[0] = 40;
    } 
}





</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="52">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.state == 'building')  
{
    if( global.playerGold &gt;= 100 &amp;&amp; global.playerEnergy &gt;= 50 &amp;&amp; !instance_exists(obj_dnalab))
    {
        global.playerGold -= 100;
        //global.playerEnergy -= 50;
        instance_create(player.x, player.y, obj_dnalab);
        global.cant_afford = false;
        global.state = 'none';
    }
    else
    {
        global.cant_afford = true;
        obj_HUDcontroller.alarm[0] = 40;
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.state == 'building') 
{
    if (instance_exists (obj_oilwell)){
        var anOilWell = instance_nearest(player.x, player.y, obj_oilwell);
        if (anOilWell.inProximity){
            if( global.playerGold &gt;= 100)
            {
                global.playerGold -= 100;
                instance_create(anOilWell.x, anOilWell.y, obj_drill);
                with(anOilWell){instance_destroy()}
                global.cant_afford = false;
                global.state = 'none';
            }
            else
            {
                global.cant_afford = true;
                obj_HUDcontroller.alarm[0] = 40;
            }
        }
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.state == 'building')  
{
    if( global.playerGold &gt;= 100 &amp;&amp; global.playerEnergy &gt;= 30 &amp;&amp; !instance_exists(obj_deflab))
    {
        global.playerGold -= 100;
        //global.playerEnergy -= 30;
        instance_create(player.x, player.y, obj_deflab);
        global.cant_afford = false;
        global.state = 'none';
    }
    else
    {
        global.cant_afford = true;
        obj_HUDcontroller.alarm[0] = 40;
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="49">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.state == 'building') 
{
    if( global.playerGold &gt;= 100 &amp;&amp; global.playerEnergy &gt;= 50 &amp;&amp; !instance_exists(obj_lab))
    {
        global.playerGold -= 100;
        //global.playerEnergy -= 50;
        instance_create(player.x, player.y, obj_lab);
        global.cant_afford = false;
        global.state = 'none';
    }
    else
    {
        global.cant_afford = true;
        obj_HUDcontroller.alarm[0] = 40;
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="87">
      <action>
        <libid>1</libid>
        <id>541</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_sprite_set</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>5</kind>
            <sprite>player_standu</sprite>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="83">
      <action>
        <libid>1</libid>
        <id>541</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_sprite_set</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>5</kind>
            <sprite>player_spr</sprite>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="68">
      <action>
        <libid>1</libid>
        <id>541</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_sprite_set</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>5</kind>
            <sprite>player_stands</sprite>
          </argument>
          <argument>
            <kind>0</kind>
            <string>-1</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>.3</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_xscale</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>-1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="65">
      <action>
        <libid>1</libid>
        <id>541</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_sprite_set</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>5</kind>
            <sprite>player_stands</sprite>
          </argument>
          <argument>
            <kind>0</kind>
            <string>-1</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>.3</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_xscale</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>1</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
